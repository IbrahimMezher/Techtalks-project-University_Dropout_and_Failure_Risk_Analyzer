<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Choose New Password</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style6.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">

</head>

<body>
  <div class="bg-blob blob-1" aria-hidden="true"></div>
  <div class="bg-blob blob-2" aria-hidden="true"></div>
  <div class="bg-grid" aria-hidden="true"></div>

  <div class="auth">
    <section class="card">
      <header class="card-header">
        <div class="brandline">
          <span class="brand-dot" aria-hidden="true"></span>
          <span class="brand-name">Dropout Analyzer</span>
        </div>

        <h1>Create new password</h1>
        <p class="subtext">Choose a strong password you wonâ€™t forget.</p>
      </header>

      <form method="POST" class="form" autocomplete="on">
        <div class="field">
          <label for="pw1">New password</label>
          <div class="password-wrap">
            <input id="pw1" type="password" name="password1" placeholder="New password" required>
            <button class="eye eye1" type="button" aria-label="Show password">
              <svg class="eye-open" viewBox="0 0 24 24">
           <path d="M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7zm0 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"/>
           </svg>
           <svg class="eye-closed" viewBox="0 0 24 24">
           <path d="M2 2l20 20M12 5c-7 0-10 7-10 7a17 17 0 0 0 5 5M9.5 9.5a3.5 3.5 0 0 0 5 5"/>
           </svg>
            </button>
          </div>
        </div>

        <div class="field">
          <label for="pw2">Confirm password</label>
          <div class="password-wrap">
            <input id="pw2" type="password" name="password2" placeholder="Confirm password" required>
            <button class="eye eye2" type="button" aria-label="Show password">
              <svg class="eye-open" viewBox="0 0 24 24">
           <path d="M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7zm0 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"/>
           </svg>
           <svg class="eye-closed" viewBox="0 0 24 24">
           <path d="M2 2l20 20M12 5c-7 0-10 7-10 7a17 17 0 0 0 5 5M9.5 9.5a3.5 3.5 0 0 0 5 5"/>
           </svg>
            </button>
          </div>
        </div>

        <button class="btn btn-primary" type="submit">Reset Password</button>

        <div class="links">
          <a class="link" href="{{ url_for('auth.login') }}">Back to login</a>
        </div>

        <div class="flashes">
          {% with messages = get_flashed_messages(with_categories=true) %}
            {% for cat, msg in messages %}
              <p class="flash {{ cat }}">{{ msg }}</p>
            {% endfor %}
          {% endwith %}
        </div>
      </form>
    </section>
  </div>

  <script>
document.querySelectorAll(".eye").forEach(btn=>{
  const input = btn.parentElement.querySelector("input");
  const open = btn.querySelector(".eye-open");
  const closed = btn.querySelector(".eye-closed");

  btn.addEventListener("click", ()=>{
    const show = input.type === "password";
    input.type = show ? "text" : "password";

    open.style.opacity = show ? 0 : 1;
    closed.style.opacity = show ? 1 : 0;
  });
});
</script>

</body>
</html>
